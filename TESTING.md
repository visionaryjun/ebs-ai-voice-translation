# 테스트 가이드

## 🧪 기능 테스트 체크리스트

### 준비 사항
- [ ] FFmpeg 설치 확인: `ffmpeg -version`
- [ ] Python 3.9+ 설치 확인: `python3 --version`
- [ ] Node.js 16+ 설치 확인: `node --version`
- [ ] 백엔드 서버 실행 중: http://localhost:8000
- [ ] 프론트엔드 서버 실행 중: http://localhost:3000

## 1️⃣ AI 음성학습 기능 테스트

### 테스트 케이스 1.1: 문장 목록 불러오기
**단계:**
1. 브라우저에서 http://localhost:3000 접속
2. User ID 입력 (예: "test_user_01")
3. "1. AI 음성학습" 페이지 선택

**예상 결과:**
- ✅ 40개의 학습용 문장이 표시됨
- ✅ 진행도 바가 0/40으로 표시됨
- ✅ 첫 번째 문장이 화면에 표시됨

### 테스트 케이스 1.2: 음성 녹음
**단계:**
1. "🎙️ 녹음 시작" 버튼 클릭
2. 브라우저 마이크 권한 허용
3. 문장을 소리내어 읽기 (2-3초)
4. "⏹️ 녹음 중지" 버튼 클릭

**예상 결과:**
- ✅ 녹음 중 버튼이 빨간색으로 변경됨
- ✅ "업로드 성공!" 메시지 표시
- ✅ 자동으로 다음 문장으로 이동
- ✅ 진행도가 1/40으로 업데이트

### 테스트 케이스 1.3: 여러 문장 연속 녹음
**단계:**
1. 30개 이상의 문장을 연속으로 녹음
2. 진행도 확인

**예상 결과:**
- ✅ 녹음된 문장 수만큼 진행도 증가
- ✅ 완료된 문장의 "녹음 시작" 버튼이 비활성화됨

### 테스트 케이스 1.4: 모델 학습
**단계:**
1. 30개 이상 녹음 완료
2. "🧠 모델 학습 시작" 버튼 클릭
3. 학습 완료 대기 (2-5분)

**예상 결과:**
- ✅ "모델 학습 중..." 메시지 표시
- ✅ 학습 완료 후 "학습 완료!" 메시지
- ✅ 백엔드 로그에 학습 진행 상황 표시

### 테스트 케이스 1.5: 진행도 복원
**단계:**
1. 페이지 새로고침
2. 동일한 User ID로 접속

**예상 결과:**
- ✅ 이전 녹음 진행도가 복원됨
- ✅ 완료된 문장이 체크 표시됨

## 2️⃣ STT & 번역 & TTS 기능 테스트

### 테스트 케이스 2.1: 유튜브 URL 처리
**단계:**
1. "2. STT & 번역 & TTS" 페이지 선택
2. 번역 언어 선택 (예: Indonesian)
3. 유튜브 URL 입력 (예: 짧은 한국어 영상)
4. "🚀 처리 시작" 버튼 클릭

**예상 결과:**
- ✅ 처리 단계별 메시지 표시:
  - "🎧 음성을 텍스트로 변환 중..."
  - "🌐 번역 중..."
  - "🎤 학습된 음성으로 변환 중..."
  - "🎬 비디오와 음성 결합 중..."
- ✅ 원본 텍스트 표시
- ✅ 번역된 텍스트 표시
- ✅ "✅ 처리 완료!" 메시지

### 테스트 케이스 2.2: 파일 업로드 처리
**단계:**
1. 짧은 비디오/오디오 파일 준비 (10-30초)
2. "📁 영상 파일 업로드" 섹션에서 파일 선택
3. 번역 언어 선택
4. "🚀 처리 시작" 버튼 클릭

**예상 결과:**
- ✅ 선택된 파일명 표시
- ✅ 처리 단계별 진행
- ✅ 최종 처리 완료 메시지

### 테스트 케이스 2.3: 다양한 언어 번역
**단계:**
1. 동일한 영상으로 여러 언어 테스트:
   - Indonesian (인도네시아어)
   - Vietnamese (베트남어)
   - English (영어)
   - Japanese (일본어)

**예상 결과:**
- ✅ 각 언어로 정확히 번역됨
- ✅ 번역된 텍스트가 표시됨

### 테스트 케이스 2.4: 에러 처리
**단계:**
1. User ID 없이 처리 시도
2. 학습되지 않은 User ID로 처리 시도
3. 잘못된 유튜브 URL 입력

**예상 결과:**
- ✅ "User ID를 입력해주세요!" 경고
- ✅ "Voice model not found" 에러
- ✅ "처리 실패" 에러 메시지

## 3️⃣ 결과 확인 기능 테스트

### 테스트 케이스 3.1: 결과 파일 목록
**단계:**
1. "3. 결과 확인" 페이지 선택
2. "🔄 새로고침" 버튼 클릭

**예상 결과:**
- ✅ 생성된 파일 목록 표시
- ✅ 파일명, 크기 정보 표시

### 테스트 케이스 3.2: 비디오 미리보기
**단계:**
1. 파일 목록에서 파일 클릭
2. 비디오 플레이어 확인
3. 재생 버튼 클릭

**예상 결과:**
- ✅ 선택된 파일 하이라이트
- ✅ 비디오 플레이어에 영상 로드
- ✅ 학습된 음성으로 번역된 오디오 재생

### 테스트 케이스 3.3: 파일 다운로드
**단계:**
1. 파일 목록에서 "⬇️" 버튼 클릭

**예상 결과:**
- ✅ 파일 다운로드 시작
- ✅ 다운로드된 파일 재생 가능

## 🔍 API 엔드포인트 테스트

### 백엔드 API 직접 테스트

#### 테스트 1: Health Check
```bash
curl http://localhost:8000/health
```
**예상 결과:**
```json
{"status": "healthy"}
```

#### 테스트 2: 문장 목록 조회
```bash
curl http://localhost:8000/api/voice/sentences
```
**예상 결과:**
```json
{
  "total": 40,
  "sentences": ["안녕하세요. 반갑습니다.", ...]
}
```

#### 테스트 3: 지원 언어 조회
```bash
curl http://localhost:8000/api/translate/languages
```
**예상 결과:**
```json
{
  "languages": {
    "ko": "Korean",
    "id": "Indonesian",
    "vi": "Vietnamese",
    ...
  }
}
```

#### 테스트 4: API 문서 확인
브라우저에서 접속:
- http://localhost:8000/docs (Swagger UI)
- http://localhost:8000/redoc (ReDoc)

**예상 결과:**
- ✅ 모든 API 엔드포인트 문서화
- ✅ Try it out 기능으로 직접 테스트 가능

## 🐛 알려진 이슈 및 해결방법

### 이슈 1: CORS 에러
**증상:** 프론트엔드에서 API 호출 시 CORS 에러
**해결:**
```python
# backend/main.py에서 CORS 설정 확인
allow_origins=["http://localhost:3000"]
```

### 이슈 2: 파일 경로 에러
**증상:** "File not found" 에러
**해결:**
```bash
# 필요한 디렉토리 생성
mkdir -p data/voice_models data/uploads data/outputs
```

### 이슈 3: FFmpeg 에러
**증상:** "ffmpeg not found"
**해결:**
```bash
# macOS
brew install ffmpeg

# Ubuntu
sudo apt install ffmpeg
```

### 이슈 4: 모델 다운로드 실패
**증상:** "Failed to download model"
**해결:**
- 인터넷 연결 확인
- 충분한 디스크 공간 확인 (최소 10GB)
- 프록시 설정 확인

### 이슈 5: 메모리 부족
**증상:** "CUDA out of memory" 또는 시스템 느려짐
**해결:**
```python
# backend/api/stt.py - 더 작은 모델 사용
whisper_model = whisper.load_model("tiny")  # base 대신 tiny

# 또는 CPU 모드 강제
import torch
torch.cuda.is_available = lambda: False
```

## 📊 성능 테스트

### 벤치마크 테스트

#### 테스트 1: 음성 인식 속도 (STT)
- **입력:** 1분 길이 오디오
- **예상 시간:**
  - Whisper tiny: ~10초
  - Whisper base: ~30초
  - Whisper medium: ~60초

#### 테스트 2: 번역 속도
- **입력:** 100단어 텍스트
- **예상 시간:** <5초

#### 테스트 3: 음성 합성 속도 (TTS)
- **입력:** 50단어 텍스트
- **예상 시간:** ~20-30초

#### 테스트 4: 전체 파이프라인
- **입력:** 1분 유튜브 영상
- **예상 총 시간:** 1-2분

### 부하 테스트
```bash
# 동시 요청 테스트 (선택사항)
# Apache Bench 사용
ab -n 100 -c 10 http://localhost:8000/health
```

## ✅ 최종 체크리스트

프로덕션 배포 전 확인사항:

- [ ] 모든 기능 테스트 통과
- [ ] API 문서 최신화
- [ ] 에러 핸들링 확인
- [ ] 로깅 설정 완료
- [ ] 보안 설정 (API 키, CORS, Rate limiting)
- [ ] 백업 전략 수립
- [ ] 모니터링 설정
- [ ] 성능 최적화
- [ ] 문서화 완료

## 🎯 품질 기준

### 성공 기준
- ✅ 음성 학습 완료율: 100%
- ✅ STT 정확도: >90%
- ✅ 번역 정확도: >85%
- ✅ TTS 자연스러움: 주관적 평가
- ✅ 전체 처리 시간: 1분 영상당 <3분
- ✅ 에러율: <5%

### 사용자 경험 기준
- ✅ 페이지 로드 시간: <2초
- ✅ 버튼 반응 시간: <100ms
- ✅ 명확한 진행 상태 표시
- ✅ 직관적인 UI/UX
- ✅ 에러 메시지 명확성
