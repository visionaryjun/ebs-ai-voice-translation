# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

## ğŸ“ ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Voice   â”‚  â”‚  Video   â”‚  â”‚ Results  â”‚                  â”‚
â”‚  â”‚ Training â”‚  â”‚Processingâ”‚  â”‚          â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (FastAPI)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   API Routes                          â”‚  â”‚
â”‚  â”‚  /voice  /stt  /translate  /tts  /video             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   AI/ML Models                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚ Whisper  â”‚  â”‚  Google  â”‚  â”‚  XTTS-v2 â”‚          â”‚  â”‚
â”‚  â”‚  â”‚  (STT)   â”‚  â”‚Translate â”‚  â”‚  (TTS)   â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Media Processing                     â”‚  â”‚
â”‚  â”‚     FFmpeg, yt-dlp, MoviePy, PyDub                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Data Storage                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Voice Models â”‚  â”‚   Uploads    â”‚  â”‚   Outputs    â”‚     â”‚
â”‚  â”‚   (.wav)     â”‚  â”‚  (.mp4/.wav) â”‚  â”‚    (.mp4)    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### 1. ìŒì„± í•™ìŠµ í”Œë¡œìš°
```
ì‚¬ìš©ì â†’ ë§ˆì´í¬ ë…¹ìŒ â†’ Frontend (MediaRecorder API)
         â†“
    Audio Blob (WAV)
         â†“
    POST /api/voice/upload/{user_id}
         â†“
    Backend: íŒŒì¼ ì €ì¥
         â†“
    data/voice_models/{user_id}/sample_N.wav
         â†“
    POST /api/voice/train/{user_id}
         â†“
    XTTS-v2: ìŒì„± ë³µì œ ëª¨ë¸ í•™ìŠµ
         â†“
    ëª¨ë¸ ì €ì¥ â†’ metadata.json
```

### 2. ì˜ìƒ ì²˜ë¦¬ í”Œë¡œìš° (ìœ íŠœë¸Œ)
```
ìœ íŠœë¸Œ URL â†’ POST /api/stt/youtube
         â†“
    yt-dlp: ë¹„ë””ì˜¤ ë‹¤ìš´ë¡œë“œ
         â†“
    FFmpeg: ì˜¤ë””ì˜¤ ì¶”ì¶œ (.wav)
         â†“
    Whisper: ìŒì„± â†’ í…ìŠ¤íŠ¸ + ì„¸ê·¸ë¨¼íŠ¸
         â†“
    POST /api/translate/translate-segments
         â†“
    GoogleTranslator: ì›ë³¸ ì–¸ì–´ â†’ ëª©í‘œ ì–¸ì–´
         â†“
    POST /api/tts/synthesize-segments
         â†“
    XTTS-v2: ë²ˆì—­ëœ í…ìŠ¤íŠ¸ â†’ í•™ìŠµëœ ìŒì„±
         â†“
    POST /api/video/combine
         â†“
    FFmpeg: ì›ë³¸ ë¹„ë””ì˜¤ + ìƒˆ ì˜¤ë””ì˜¤ í•©ì„±
         â†“
    ìµœì¢… ì¶œë ¥ íŒŒì¼ (.mp4)
```

### 3. ì˜ìƒ ì²˜ë¦¬ í”Œë¡œìš° (íŒŒì¼ ì—…ë¡œë“œ)
```
íŒŒì¼ ì„ íƒ â†’ POST /api/stt/upload
         â†“
    íŒŒì¼ ì €ì¥ (uploads/)
         â†“
    FFmpeg: ì˜¤ë””ì˜¤ ì¶”ì¶œ (ë¹„ë””ì˜¤ì¸ ê²½ìš°)
         â†“
    [ë™ì¼í•œ STT â†’ ë²ˆì—­ â†’ TTS â†’ ê²°í•© ê³¼ì •]
         â†“
    ìµœì¢… ì¶œë ¥ íŒŒì¼
```

## ğŸ§© ì»´í¬ë„ŒíŠ¸ ìƒì„¸

### Frontend ì»´í¬ë„ŒíŠ¸

#### 1. VoiceTraining.js
- **ì—­í• **: ìŒì„± ë…¹ìŒ ë° í•™ìŠµ ì¸í„°í˜ì´ìŠ¤
- **ì£¼ìš” ê¸°ëŠ¥**:
  - MediaRecorder APIë¡œ ë§ˆì´í¬ ë…¹ìŒ
  - 40ê°œ ë¬¸ì¥ ìˆœì°¨ ë…¹ìŒ
  - ì§„í–‰ë„ ì¶”ì 
  - ëª¨ë¸ í•™ìŠµ íŠ¸ë¦¬ê±°
- **API í˜¸ì¶œ**:
  - GET /api/voice/sentences
  - POST /api/voice/upload/{user_id}
  - GET /api/voice/progress/{user_id}
  - POST /api/voice/train/{user_id}

#### 2. VideoProcessing.js
- **ì—­í• **: ì˜ìƒ ì…ë ¥ ë° ì²˜ë¦¬ ì¸í„°í˜ì´ìŠ¤
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ìœ íŠœë¸Œ URL ì…ë ¥
  - íŒŒì¼ ì—…ë¡œë“œ
  - ì–¸ì–´ ì„ íƒ
  - ì²˜ë¦¬ ìƒíƒœ í‘œì‹œ
  - ì›ë³¸/ë²ˆì—­ í…ìŠ¤íŠ¸ ë¯¸ë¦¬ë³´ê¸°
- **API í˜¸ì¶œ**:
  - POST /api/stt/youtube
  - POST /api/stt/upload
  - POST /api/translate/translate-segments
  - POST /api/tts/synthesize-segments
  - POST /api/video/combine

#### 3. Results.js
- **ì—­í• **: ê²°ê³¼ íŒŒì¼ ì¡°íšŒ ë° ì¬ìƒ
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ìƒì„±ëœ íŒŒì¼ ëª©ë¡ í‘œì‹œ
  - ë¹„ë””ì˜¤ ë¯¸ë¦¬ë³´ê¸°
  - íŒŒì¼ ë‹¤ìš´ë¡œë“œ
- **API í˜¸ì¶œ**:
  - GET /api/video/outputs

### Backend API ì—”ë“œí¬ì¸íŠ¸

#### Voice Training API (`/api/voice`)
- `GET /sentences`: í•™ìŠµìš© ë¬¸ì¥ ëª©ë¡
- `POST /upload/{user_id}`: ìŒì„± ìƒ˜í”Œ ì—…ë¡œë“œ
- `GET /progress/{user_id}`: í•™ìŠµ ì§„í–‰ë„ ì¡°íšŒ
- `POST /train/{user_id}`: ìŒì„± ëª¨ë¸ í•™ìŠµ ì‹œì‘
- `DELETE /reset/{user_id}`: í•™ìŠµ ë°ì´í„° ì´ˆê¸°í™”

#### STT API (`/api/stt`)
- `POST /youtube`: ìœ íŠœë¸Œ URL â†’ í…ìŠ¤íŠ¸
- `POST /upload`: íŒŒì¼ ì—…ë¡œë“œ â†’ í…ìŠ¤íŠ¸
- `POST /transcribe-file`: ê¸°ì¡´ íŒŒì¼ â†’ í…ìŠ¤íŠ¸

#### Translation API (`/api/translate`)
- `GET /languages`: ì§€ì› ì–¸ì–´ ëª©ë¡
- `POST /translate`: ë‹¨ì¼ í…ìŠ¤íŠ¸ ë²ˆì—­
- `POST /translate-segments`: ì„¸ê·¸ë¨¼íŠ¸ë³„ ë²ˆì—­
- `POST /batch-translate`: ì¼ê´„ ë²ˆì—­

#### TTS API (`/api/tts`)
- `POST /synthesize`: í…ìŠ¤íŠ¸ â†’ í•™ìŠµëœ ìŒì„±
- `POST /synthesize-segments`: ì„¸ê·¸ë¨¼íŠ¸ë³„ ìŒì„± í•©ì„±
- `GET /voices`: í•™ìŠµëœ ìŒì„± ëª¨ë¸ ëª©ë¡

#### Video API (`/api/video`)
- `POST /combine`: ë¹„ë””ì˜¤ + ì˜¤ë””ì˜¤ ê²°í•©
- `POST /process-pipeline`: ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
- `GET /outputs`: ê²°ê³¼ íŒŒì¼ ëª©ë¡

## ğŸ¤– AI/ML ëª¨ë¸

### 1. Whisper (OpenAI)
- **ì—­í• **: Speech-to-Text (STT)
- **ëª¨ë¸**: base (ê¸°ë³¸) / tiny, small, medium, large ì„ íƒ ê°€ëŠ¥
- **ê¸°ëŠ¥**:
  - ë‹¤êµ­ì–´ ìŒì„± ì¸ì‹
  - íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ ì„¸ê·¸ë¨¼íŠ¸ ìƒì„±
  - ìë™ ì–¸ì–´ ê°ì§€
- **ì…ë ¥**: ì˜¤ë””ì˜¤ íŒŒì¼ (.wav, .mp3, .mp4)
- **ì¶œë ¥**: í…ìŠ¤íŠ¸ + ì„¸ê·¸ë¨¼íŠ¸ (ì‹œì‘/ì¢…ë£Œ ì‹œê°„)

### 2. Google Translator (deep-translator)
- **ì—­í• **: í…ìŠ¤íŠ¸ ë²ˆì—­
- **ì§€ì› ì–¸ì–´**: 100+ ì–¸ì–´
- **ì£¼ìš” ì–¸ì–´**:
  - Korean (ko)
  - Indonesian (id)
  - Vietnamese (vi)
  - English (en)
  - Japanese (ja)
  - Chinese (zh-CN, zh-TW)
- **ì…ë ¥**: í…ìŠ¤íŠ¸ (ë¬¸ìì—´ ë˜ëŠ” ì„¸ê·¸ë¨¼íŠ¸ ë°°ì—´)
- **ì¶œë ¥**: ë²ˆì—­ëœ í…ìŠ¤íŠ¸

### 3. Coqui XTTS-v2
- **ì—­í• **: Text-to-Speech with Voice Cloning
- **íŠ¹ì§•**:
  - ë‹¤êµ­ì–´ ì§€ì› (17ê°œ ì–¸ì–´)
  - ìŒì„± ë³µì œ (Voice Cloning)
  - ì°¸ì¡° ìŒì„± ê¸°ë°˜ í•©ì„±
- **ì…ë ¥**:
  - í…ìŠ¤íŠ¸
  - ì°¸ì¡° ìŒì„± íŒŒì¼ (.wav)
  - ì–¸ì–´ ì½”ë“œ
- **ì¶œë ¥**: í•©ì„±ëœ ìŒì„± (.wav)

## ğŸ’¾ ë°ì´í„° êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
data/
â”œâ”€â”€ voice_models/          # ì‚¬ìš©ìë³„ ìŒì„± ëª¨ë¸
â”‚   â””â”€â”€ {user_id}/
â”‚       â”œâ”€â”€ sample_0.wav
â”‚       â”œâ”€â”€ sample_1.wav
â”‚       â”œâ”€â”€ ...
â”‚       â”œâ”€â”€ model.pth      # í•™ìŠµëœ ëª¨ë¸ (ì„ íƒì‚¬í•­)
â”‚       â””â”€â”€ metadata.json  # ëª¨ë¸ ë©”íƒ€ë°ì´í„°
â”‚
â”œâ”€â”€ uploads/               # ì—…ë¡œë“œëœ íŒŒì¼
â”‚   â”œâ”€â”€ {video_id}.mp4
â”‚   â”œâ”€â”€ {video_id}.wav
â”‚   â””â”€â”€ {filename}.mp4
â”‚
â””â”€â”€ outputs/               # ìƒì„±ëœ ê²°ê³¼ íŒŒì¼
    â”œâ”€â”€ output_*.mp4       # ìµœì¢… ë¹„ë””ì˜¤
    â”œâ”€â”€ segment_*.wav      # ì„¸ê·¸ë¨¼íŠ¸ë³„ ì˜¤ë””ì˜¤
    â””â”€â”€ combined_audio.wav # ê²°í•©ëœ ì˜¤ë””ì˜¤
```

### metadata.json êµ¬ì¡°
```json
{
  "user_id": "user001",
  "samples_count": 40,
  "status": "trained",
  "model_path": "../data/voice_models/user001/model.pth",
  "created_at": "2025-01-15T10:30:00Z"
}
```

### ì„¸ê·¸ë¨¼íŠ¸ ë°ì´í„° êµ¬ì¡°
```json
{
  "id": 0,
  "start": 0.0,
  "end": 3.5,
  "original_text": "Hello, world!",
  "translated_text": "Halo, dunia!",
  "audio_file": "../data/outputs/segment_0_0.wav"
}
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **íŒŒì¼ ì—…ë¡œë“œ ì œí•œ**:
   - íŒŒì¼ í¬ê¸° ì œí•œ (ì˜ˆ: 100MB)
   - í—ˆìš©ëœ MIME íƒ€ì…ë§Œ ì—…ë¡œë“œ
   - íŒŒì¼ëª… sanitization

2. **ì‚¬ìš©ì ë¶„ë¦¬**:
   - User IDë³„ ë°ì´í„° ê²©ë¦¬
   - ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ëª¨ë¸ ì ‘ê·¼ ë¶ˆê°€

3. **API ë³´ì•ˆ** (í”„ë¡œë•ì…˜ ì‹œ):
   - API Key ì¸ì¦
   - Rate limiting
   - CORS ì„¤ì •

## ğŸš€ í™•ì¥ ê°€ëŠ¥ì„±

1. **ë°ì´í„°ë² ì´ìŠ¤ ì¶”ê°€**:
   - PostgreSQL ë˜ëŠ” MongoDB
   - ì‚¬ìš©ì ì •ë³´, ì‘ì—… ì´ë ¥ ì €ì¥

2. **ë¹„ë™ê¸° ì‘ì—… ì²˜ë¦¬**:
   - Celery + Redis
   - ì¥ì‹œê°„ ì‘ì—…ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬

3. **í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€**:
   - AWS S3, Google Cloud Storage
   - íŒŒì¼ ì €ì¥ ë° ë°°í¬

4. **ì»¨í…Œì´ë„ˆí™”**:
   - Docker / Docker Compose
   - Kubernetes ë°°í¬

5. **ëª¨ë‹ˆí„°ë§**:
   - Prometheus + Grafana
   - ì„±ëŠ¥ ë° ì˜¤ë¥˜ ì¶”ì 

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

### ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„ (ê¸°ì¤€: 1ë¶„ ì˜ìƒ)
- STT (Whisper base): ~30ì´ˆ
- ë²ˆì—­: ~5ì´ˆ
- TTS (XTTS-v2): ~60ì´ˆ
- ë¹„ë””ì˜¤ ê²°í•©: ~10ì´ˆ
- **ì´ ì²˜ë¦¬ ì‹œê°„**: ~105ì´ˆ

### ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
- **CPU ëª¨ë“œ**: 4-8GB RAM
- **GPU ëª¨ë“œ**: 6-10GB VRAM
- **ë””ìŠ¤í¬**: 1ë¶„ ì˜ìƒë‹¹ ì•½ 50-100MB
